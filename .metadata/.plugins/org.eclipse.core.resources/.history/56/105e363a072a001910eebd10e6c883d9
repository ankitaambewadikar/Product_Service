package com.cg.eShoppingZone.productservice.service;

import static org.junit.Assert.assertEquals;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.NoSuchElementException;
import java.util.Optional;

import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

import com.cg.eShoppingZone.productservice.entity.Product;

@RunWith(SpringRunner.class)
@SpringBootTest
//@DataMongoTest
public class ProductServiceTest {

	/*
	 * @Autowired private ProductRepository productRepository;
	 */
	@Autowired
	private ProductService productServiceImpl;

	private Product product;

	@Before
	public void setUp() {
		Map<Integer, Double> rating = new HashMap<Integer, Double>();
		rating.put(1, 10.00);
		Map<Integer, String> review = new HashMap<Integer, String>();
		review.put(1, "Excellent");
		List<String> image = new ArrayList<String>();
		image.add("imageOne");
		Map<String, String> specification = new HashMap<String, String>();
		specification.put("SpectOne", "two compartments");
		product = new Product(101, "handbag", "bags and Luggage", rating, review, image, 1400.00, "good product",
				specification);
	}

	/*
	 * @Test (expected = ProductNotAddedException.class) public void
	 * addProductTest() throws Exception {
	 * 
	 * productServiceImpl.addProducts(product);
	 * 
	 * }
	 */

	/*@Test
	public void testForGetProductByIdCheckId() {
		Optional<Product> actualProduct = productServiceImpl.getProductById(101);
		assertEquals(actualProduct.getProductId(), 101);

	}*/

	@Test
	public void testForGetProductByIdCheckProductObject() {
		Optional<Product> actualProduct = productServiceImpl.getProductById(101);
		assertEquals(product, actualProduct.get());

	}

	@Test(expected = NoSuchElementException.class)
	public void testForGetProductByIdProductNotAvailable() {
		Optional<Product> actualProduct = productServiceImpl.getProductById(90);

		assertEquals(product, actualProduct);
	}

	@Test
	public void testForGetProductByName() {
		Optional<Product> actualProduct = productServiceImpl.getProductByName("handbag");
		assertEquals(product, actualProduct);

	}
/*
	@Test(expected = NoSuchElementException.class)
	public void testForGetProductByNameNotAvailable() {
		Product actualProduct = productServiceImpl.getProductByName("shoes");
		assertEquals(product, actualProduct);
		// Assert.assertEquals(product, actualProduct);
	}

	@Test
	public void testForUpdateProducts() {
		Optional<Product> actualProduct = productServiceImpl.getProductById(102);
		
		actualProduct.setPrice(45600.00);
		//actualProduct.setDescription("Excellent product");
		Product updatedProduct = productServiceImpl.updateProducts(actualProduct);
		
		assertEquals(actualProduct, updatedProduct);
	}

	@Test
	public void testForDeleteProductByIdElementPresent() {
		Product deleteProduct = productServiceImpl.getProductById(201);
		System.out.println(deleteProduct);
		boolean delete = productServiceImpl.deleteProductById(201);
	}*/
}
